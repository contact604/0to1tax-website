<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë¸Œëœì¹˜ í™•ì¸</title>
    <style>
        body {
            font-family: monospace;
            padding: 20px;
            background: #1a1a2e;
            color: #eee;
        }
        .result {
            background: #16213e;
            padding: 20px;
            margin: 10px 0;
            border-radius: 8px;
            border-left: 4px solid #3B82F6;
        }
        .success { border-left-color: #10b981; }
        .error { border-left-color: #ef4444; }
        button {
            background: linear-gradient(135deg, #3B82F6, #8B5CF6);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 8px;
            cursor: pointer;
            font-size: 16px;
            margin: 10px 5px;
        }
        pre { background: #0f1419; padding: 10px; border-radius: 4px; overflow-x: auto; }
    </style>
</head>
<body>
    <h1>ğŸ” ë¸Œëœì¹˜ ë° ì €ì¥ì†Œ í™•ì¸</h1>
    
    <button onclick="checkRepo()">ì €ì¥ì†Œ í™•ì¸</button>
    <button onclick="checkBranches()">ë¸Œëœì¹˜ ëª©ë¡ í™•ì¸</button>
    <button onclick="testMain()">main ë¸Œëœì¹˜ í…ŒìŠ¤íŠ¸</button>
    <button onclick="testMaster()">master ë¸Œëœì¹˜ í…ŒìŠ¤íŠ¸</button>
    
    <div id="results"></div>
    
    <script>
        const resultsDiv = document.getElementById('results');
        
        function addLog(html, className = 'result') {
            const div = document.createElement('div');
            div.className = className;
            div.innerHTML = html;
            resultsDiv.insertBefore(div, resultsDiv.firstChild);
        }
        
        async function checkRepo() {
            addLog('ğŸ”„ ì €ì¥ì†Œ ì •ë³´ í™•ì¸ ì¤‘...');
            try {
                const response = await fetch('https://api.github.com/repos/contact604/0to1tax-website');
                const data = await response.json();
                
                if (response.ok) {
                    addLog(`âœ… <strong>ì €ì¥ì†Œ ì •ë³´</strong><br>
                           ì´ë¦„: ${data.full_name}<br>
                           ê¸°ë³¸ ë¸Œëœì¹˜: <strong>${data.default_branch}</strong><br>
                           ê³µê°œ: ${data.private ? 'Private' : 'Public'}<br>
                           ìƒì„±: ${new Date(data.created_at).toLocaleDateString()}<br>
                           ì—…ë°ì´íŠ¸: ${new Date(data.updated_at).toLocaleString()}`, 'result success');
                } else {
                    addLog(`âŒ ì €ì¥ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤: ${data.message}`, 'result error');
                }
            } catch (error) {
                addLog(`âŒ ì˜¤ë¥˜: ${error.message}`, 'result error');
            }
        }
        
        async function checkBranches() {
            addLog('ğŸ”„ ë¸Œëœì¹˜ ëª©ë¡ í™•ì¸ ì¤‘...');
            try {
                const response = await fetch('https://api.github.com/repos/contact604/0to1tax-website/branches');
                const branches = await response.json();
                
                if (response.ok) {
                    addLog(`âœ… <strong>ë¸Œëœì¹˜ ëª©ë¡ (${branches.length}ê°œ)</strong><br>
                           ${branches.map(b => `â€¢ <strong>${b.name}</strong>`).join('<br>')}`, 'result success');
                } else {
                    addLog(`âŒ ë¸Œëœì¹˜ ëª©ë¡ ì¡°íšŒ ì‹¤íŒ¨: ${branches.message}`, 'result error');
                }
            } catch (error) {
                addLog(`âŒ ì˜¤ë¥˜: ${error.message}`, 'result error');
            }
        }
        
        async function testMain() {
            addLog('ğŸ”„ main ë¸Œëœì¹˜ì—ì„œ _posts í´ë” í™•ì¸ ì¤‘...');
            await testBranch('main');
        }
        
        async function testMaster() {
            addLog('ğŸ”„ master ë¸Œëœì¹˜ì—ì„œ _posts í´ë” í™•ì¸ ì¤‘...');
            await testBranch('master');
        }
        
        async function testBranch(branch) {
            try {
                // ë¸Œëœì¹˜ ì§€ì •í•˜ì§€ ì•Šê³  contents API ì‚¬ìš© (ê¸°ë³¸ ë¸Œëœì¹˜ ì‚¬ìš©)
                const url = 'https://api.github.com/repos/contact604/0to1tax-website/contents/_posts';
                addLog(`ğŸ“¡ ìš”ì²­ URL: <code>${url}</code>`);
                
                const response = await fetch(url);
                const data = await response.json();
                
                if (response.status === 404) {
                    addLog(`âŒ <strong>${branch} ë¸Œëœì¹˜</strong>ì—ì„œ _posts í´ë”ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤<br>
                           Status: 404<br>
                           Message: ${data.message}`, 'result error');
                } else if (response.ok) {
                    const mdFiles = data.filter(f => f.name.endsWith('.md'));
                    addLog(`âœ… <strong>${branch} ë¸Œëœì¹˜ ì„±ê³µ!</strong><br>
                           ì „ì²´ íŒŒì¼: ${data.length}ê°œ<br>
                           ë§ˆí¬ë‹¤ìš´: ${mdFiles.length}ê°œ<br>
                           <br><strong>íŒŒì¼ ëª©ë¡:</strong><br>
                           ${data.map(f => `â€¢ ${f.name} (${(f.size/1024).toFixed(1)}KB)`).join('<br>')}`, 'result success');
                } else {
                    addLog(`âŒ ${branch} ë¸Œëœì¹˜ ì˜¤ë¥˜: ${response.status} - ${data.message}`, 'result error');
                }
            } catch (error) {
                addLog(`âŒ ${branch} ë¸Œëœì¹˜ í…ŒìŠ¤íŠ¸ ì‹¤íŒ¨: ${error.message}`, 'result error');
            }
        }
        
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ìë™ ì‹¤í–‰
        window.addEventListener('load', () => {
            addLog('âœ¨ í˜ì´ì§€ ë¡œë“œ ì™„ë£Œ. ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ í…ŒìŠ¤íŠ¸í•˜ì„¸ìš”.');
            checkRepo(); // ìë™ìœ¼ë¡œ ì €ì¥ì†Œ ì •ë³´ í™•ì¸
        });
    </script>
</body>
</html>
